<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xml:lang="en" lang="en">
<f:metadata>
    <f:viewAction action="#{createOfferController.isEmployee()}" />
    <f:viewParam name="id" value="#{createOfferController.fromDraft}" converter="#{offerConverter}" />
</f:metadata>
<head>
    <title>Angebot</title>
</head>
<h:body>
    <ui:composition template="../resources/templates/common.xhtml" >
        <ui:define name="content">
            <h:outputStylesheet library="css" name="offer.css" />
            <h1>Angebot erstellen</h1>

            <div class="offer-form">
                <h:form>
                    <!-- General Data -->
                    <legend>Allgemeines:</legend>
                    <div class="offer-data">

                        <!-- Title -->
                        <h:outputLabel for="title" value="Titel:" styleClass="label-offAttr" />
                        <h:inputText id="title" value="#{createOfferController.title}" styleClass="input-title" />
                        <br />
                        <c:if test="#{not createOfferController.getErrorMsg('title').equals('')}">
                            <div class="errMsg-createOffer">
                                <i class="pi pi-exclamation-circle">&nbsp;</i>
                                <h:outputText value="#{createOfferController.getErrorMsg('title')}" />
                            </div>
                        </c:if>
                        <br />

                        <!-- Address -->
                        <h:outputLabel for="address" value="Adresse:" styleClass="label-title" />
                        <div id="address">
                            <div class="offer-attr">
                                <h:outputLabel for="street" value="Straße:" />
                                <h:inputText id="street" value="#{createOfferController.street}" styleClass="input-plain" />
                            </div>

                            <div class="offer-attr">
                                <h:outputLabel for="postCode" value="Postleitzahl:" styleClass="label-offAttr" />
                                <h:inputText id="postCode" value="#{createOfferController.postalCode}" styleClass="input-plain" />
                            </div>

                            <div class="offer-attr">
                                <h:outputLabel for="location" value="Ort:" styleClass="label-offAttr" />
                                <h:inputText id="location" value="#{createOfferController.city}" styleClass="input-plain" />
                            </div>
                            <br />
                            <c:if test="#{not createOfferController.getErrorMsg('address').equals('')}">
                                <div class="errMsg-createOffer">
                                    <i class="pi pi-exclamation-circle">&nbsp;</i>
                                    <h:outputText value="#{createOfferController.getErrorMsg('address')}" />
                                </div>
                            </c:if>
                        </div>


                        <!-- Attributes -->
                        <!-- Field of profession -->
                        <div class="offer-attr">
                            <h:outputLabel for="field" value="Berufsfeld:" styleClass="label-offAttr" />
                            <br />
                            <h:selectOneMenu id="field" value="#{createOfferController.field}" styleClass="input-plain">
                                <f:selectItem itemValue="-1" itemLabel="/nicht ausgewählt" />
                                <f:selectItems value="#{createOfferController.allFields}" var="field"
                                               itemValue="#{field.first()}" itemLabel="#{field.second()}" />
                            </h:selectOneMenu>
                        </div>

                        <!-- Level of education -->
                        <div class="offer-attr">
                            <h:outputLabel for="level" value="Einstiegsniveau:" styleClass="label-offAttr" />
                            <br />
                            <h:selectOneMenu id="level" value="#{createOfferController.level}" styleClass="input-plain" >
                                <f:selectItem itemValue="-1" itemLabel="/nicht ausgewählt" />
                                <f:selectItems value="#{createOfferController.allLevels}" var="level"
                                               itemValue="#{level.first()}" itemLabel="#{level.second()}" />
                            </h:selectOneMenu>
                        </div>

                        <!-- Working Time: -->
                        <div class="offer-attr">
                            <h:outputLabel for="time" value="Arbeitszeit:" styleClass="label-offAttr" />
                            <br />
                            <h:selectOneMenu id="time" value="#{createOfferController.time}" styleClass="input-plain">
                                <f:selectItem itemValue="-1" itemLabel="/nicht ausgewählt" />
                                <f:selectItems value="#{createOfferController.allTimes}" var="time"
                                               itemValue="#{time.first()}" itemLabel="#{time.second()}" />
                            </h:selectOneMenu>
                        </div>
                        <br />
                        <c:if test="#{not createOfferController.getErrorMsg('filter').equals('')}">
                            <div class="errMsg-createO">
                                <i class="pi pi-exclamation-circle">&nbsp;</i>
                                <h:outputText value="#{createOfferController.getErrorMsg('filter')}" />
                            </div>
                        </c:if>
                    </div>

                    <!-- Description -->
                    <legend>Beschreibung:</legend>
                    <div class="offer-descr">

                        <!-- Tasks -->
                        <h:outputLabel for="tasks" value="Aufgaben:" styleClass="label-offDescr" />
                        <c:if test="#{not createOfferController.getErrorMsg('tasks').equals('')}">
                            <div class="errMsg-createO">
                                <i class="pi pi-exclamation-circle">&nbsp;</i>
                                <h:outputText value="#{createOfferController.getErrorMsg('tasks')}" />
                            </div>
                        </c:if>
                        <br />
                        <h:inputTextarea id="tasks" value="#{createOfferController.tasks}" styleClass="area-descr" />
                        <br />

                        <!-- Qualifications -->
                        <h:outputLabel for="quali" value="Qualifikationen:" styleClass="label-offDescr" />
                        <c:if test="#{not createOfferController.getErrorMsg('qualifications').equals('')}">
                            <div class="errMsg-createO">
                                <i class="pi pi-exclamation-circle">&nbsp;</i>
                                <h:outputText value="#{createOfferController.getErrorMsg('qualifications')}" />
                            </div>
                        </c:if>
                        <br/>
                        <h:inputTextarea id="quali" value="#{createOfferController.qualifications}" styleClass="area-descr" />
                        <br />

                        <!-- Additional Data -->
                        <h:outputLabel for="extra" value="Zusätzliche Daten:" styleClass="label-offDescr" />
                        <br />
                        <h:inputTextarea id="extra" value="#{createOfferController.extras}" styleClass="area-descr" />
                    </div>
                    <br />

                    <!-- Buttons to save or publish -->
                    <div class="btns">
                        <h:commandButton value="Speichern" action="#{createOfferController.save(true)}" styleClass="btn-save ui-button" />
                        <h:commandButton value="Veröffentlichen" action="#{createOfferController.save(false)}" styleClass="btn-upload ui-button" />
                    </div>

                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</h:body>
</html>