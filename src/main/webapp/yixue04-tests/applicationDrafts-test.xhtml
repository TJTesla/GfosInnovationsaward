<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:k="http://xmlns.jcp.org/jsf/passthrough">
<f:metadata>
    <f:viewAction action="#{applicationListController.checkUserRights()}" />
</f:metadata>
<h:head>
    <title>Title</title>
</h:head>
<h:body>
    <ui:composition template="../resources/templates/common.xhtml">
        <ui:define name="content">
            <h:outputStylesheet library="css" name="applicationList.css" />
            <div align="center">
                <h2 style="font-size: 25px;">Entwürfe</h2>
                <hr />
            </div>
            <div class="applications">
                <ui:repeat var="aDraft" value="#{applicationListController.drafts}">
                    <div class="application">
                        <div class="left">
                            <h:outputLabel id="offerTitle" value="#{aDraft.offer.title}" styleClass="text-apl label-apl"  />
                        </div>
                        <div class="right">
                            <h:form>
                                <h:button id="editAppl" value="Bearbeiten" styleClass="btn-seeAppl" outcome="/03-application/application" style="margin-top: 20px;">
                                    <f:param name="id" value="#{aDraft.application.offerId}" />
                                    <f:param name="edit" value="true" />
                                </h:button>
                                <br />
                                <p:commandButton id="deleteAppl" onclick="showPopUp()" value="" styleClass="btn-delete" icon="pi pi-trash" ajax="true" />
                            </h:form>
                        </div>
                    </div>
                    <div class="cover" id="popup">
                        <div class="popup">
                            <h:outputText id="question" value="Sind Sie sich sicher, dass Sie den Entwurf löschen möchten?" />
                            <h:button value="Abbrechen" id="cancel" styleClass="btn-cancel" onclick="hidePopUp()" />
                            <h:commandButton value="Löschen" id="delete" styleClass="btn-deleteFinal" action="#{applicationListController.delete(aDraft.application)}" ajax="false" />
                        </div>
                    </div>
                </ui:repeat>
            </div>
        </ui:define>
    </ui:composition>
</h:body>
</html>