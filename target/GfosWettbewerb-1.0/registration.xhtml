<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xml:lang="en" lang="en">
<h:head>
    <title>Registrieren</title>
    <h:outputScript library="javascript" name="jquery-3.6.0.js" />
    <h:outputStylesheet library="css" name="registration.css" />
    <h:outputStylesheet library="css" name="styleBasic.css" />
    <h:outputStylesheet library="css" name="CSSResetStyleSheet.css" />
    <!--link href="resources/css/CSSResetStyleSheet.css" rel="stylesheet" /-->
    <!--link href="resources/css/styleBasic.css" rel="stylesheet" /-->
</h:head>
<h:body>
    <ui:composition template="resources/templates/common.xhtml">
        <ui:define name="content">
            <!-- TODO: How to change rendered so that is works? -->

            <h:form onsubmit="checkValidation()" id="registration" rendered="#{not testController.login}">
                <div align="center">
                    <h1>Neues Profil erstellen</h1>
                    <hr />
                </div>
                <!-- TODO: Change validation message -->
                <fieldset class="user" style="height: 200px; margin: 0 auto">
                    <legend>Nutzer Informationen</legend>
                    <label for="salutation">Anrede:</label>
                    <h:selectOneMenu id="salutation" name="salutation" class="input">
                        <f:selectItem itemValue="" itemLabel="Bitte auswählen" p:selected="selected" />
                        <f:selectItem itemValue="1" itemLabel="Herr" />
                        <f:selectItem itemValue="2" itemLabel="Frau" />
                        <f:selectItem itemValue="9" itemLabel="Divers" />
                        <f:selectItem itemValue="0" itemLabel="keine Angabe" />
                    </h:selectOneMenu>
                    <br/>

                    <label for="title">Titel:</label>
                    <h:selectManyCheckbox id="title" name="title">
                        <f:selectItem itemValue="Dr." itemLabel="Dr." />
                        <f:selectItem itemValue="" itemLabel="Prof." />
                        <f:selectItem itemValue="" itemLabel="Dipl.-Ing." />
                    </h:selectManyCheckbox>
                    <br />

                    <label for="fname">Vorname:</label>
                    <h:inputText id="fname" name="vorname" type="text" required="true" class="input">
                        <f:validateLength for="fname" minimum="2" maximum="28" />
                    </h:inputText>
                    <h:message for="fname" infoClass="infoMessage" errorClass="errorMessage" />
                    <br/>

                    <label for="lname">Nachname:</label>
                    <h:inputText id="lname" name="nachname" type="text" required="true" class="input">
                        <f:validateLength for="lname" minimum="2" maximum="28" />
                    </h:inputText>
                    <h:message for="lname" infoClass="infoMessage" errorClass="errorMessage" />
                    <br/>
                </fieldset>

                <fieldset class="data">
                    <legend>Anmeldedaten</legend>
                    <label for="username">Benutzername:</label>
                    <h:inputText id="username">
                        <f:validateLength minimum="3" maximum="10" />
                    </h:inputText>
                    <h:message for="username" infoClass="infoMessage" errorClass="errorMessage" />
                    <br />

                    <label for="email">E-Mail:</label>
                    <h:inputText id="email" name="email" type="text" p:placeholder="example@email.com" required="true" class="input">
                        <f:validateRegex for="email" pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                    </h:inputText>
                    <h:message for="email" infoClass="infoMessage" errorClass="errorMessage" />
                    <br />

                    <label for="emailRepeat">E-Mail wiederholen:</label>
                    <h:inputText id="emailRepeat" name="emailWiederholen" type="text" required="true" class="input" />
                    <h:outputText for="emailRepeat" id="checkMail" value="" />
                    <br />

                    <label for="password">Passwort:</label>
                    <h:inputSecret id="password" name="passwort" type="password" required="true" class="input">
                        <f:validateRegex for="password" pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#&amp;()–[{}]:;',?/*~$^+=&lt;>]).{8,20}$" />
                    </h:inputSecret>
                    <h:message for="password" infoClass="infoMessage" errorClass="errorMessage" />
                    <br />

                    <label for="passwordRepeat">Passwort wiederholen:</label>
                    <h:inputSecret id="passwordRepeat" name="passwortWiederholen" type="password" required="true" class="input"/>
                    <h:outputText for="passwordRepeat" id="checkPswd" value="" />
                    <br />

                    <p>Sind Sie Privatnutzer oder Firmennutzer?</p>
                    <h:selectOneRadio required="true">
                        <f:selectItem itemValue="private" itemLabel="Privat" />
                        <f:selectItem itemValue="company" itemLabel="Firma" />
                    </h:selectOneRadio>
                </fieldset>
                <!--h:commandButton action="#" type="submit"/-->
            </h:form>
            <h:commandLink value="Schon ein Profil? Hier anmelden."
                           id="loginLink"
                           action="#{testController.changeToLogin()}"
                           rendered="#{not testController.login}" />

            <h:form id="login" rendered="#{testController.login}">
                <fieldset class="user">
                    <legend>Anmelden</legend>
                    <label for="user">Benutzername:</label>
                    <h:inputText id="user" type="text" name="user" />
                    <br />
                    <label for="passwordL">Passwort:</label>
                    <h:inputSecret id="passwordL" type="password" name="password"/>
                    <br />
                    <!--h:button outcome="" id="bestaetigen" value="Login" /-->
                    <input id="bestaetigen" type="submit" name="submitButton" value="Login"/>
                </fieldset>
            </h:form>
            <h:commandLink value="Schon ein Profil? Hier anmelden."
                           id="registrationLink"
                           action="#{testController.changeToRegistration()}"
                           rendered="#{testController.login}"
                           style="align-self: center" />
        </ui:define>
    </ui:composition>
    <h:outputScript library="javascript" name="formValidation.js" />
</h:body>
</html>